{% extends "base.html" %}
{% load i18n %}
{% load staticfiles %}
{% block title %}Dashboard{% endblock %}
{% block page_title %} Dashboard {% endblock %}

{% block content %}
  <div class="row clearfix">
    <div class="column">
      {% if server_found %}
        <p>
          <div class="ibox float-e-margins p-a-2">
            <div class="ibox-title">
              <h5>Active Instances</h5>
            </div>
            <div class="ibox-content">
              {% include 'ui/includes/dashboard_table.html' %}
            </div>
          </div>
        </p>
      {% else %}
        <p></p>
        <div class="container">
          <div class="row">
            <div class="col-md-5">
              <h2 class="text-navy">{% trans "No servers were found in the database." %}</h2>
              <p>{% blocktrans %}In monit configuration file set the mmonit url to http://SERVER_IP/COLLECTOR_KEY/[HOST_GROUP] {% endblocktrans %}</p>
            </div>
          </div>
        </div>
        {%  if error %}
        <p class="alert alert-danger">{{ error }}</p>
      {% endif %}
    {% endif %}
  </div>
</div>
<script src="{% static 'js/jquery-2.1.4.min.js'%}"></script>
<script src="{% static 'js/csrf.js'%}"></script>
<script>
$(document).ready(function () {
window.intervalId = setInterval(function() {
$.post("{% url 'ui:load_dashboard_table' %}", function(data) {
$( "#dashboard_table" ).replaceWith( data.table_html );
});
}, 5000);
});
</script>
{% endblock %}
