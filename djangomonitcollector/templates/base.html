{% load staticfiles %}
{% load extra_tags %}
<!DOCTYPE html>
<html lang="en" ng-app>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Monit Collector &middot; {% block title %}{{ request.resolver_match.url_name|get_title }}{% endblock title %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Your stuff: Third-party css libraries go here -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'font-awesome/css/font-awesome.css' %}" rel="stylesheet">
    <link href="{% static 'css/plugins/toastr/toastr.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/animate.css' %}" rel="stylesheet">
    <!-- This file store project specific CSS -->
    {% block css %}
    {% endblock %}
    <!-- Latest JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <link href="{% static 'css/multiselect.css' %}" rel="stylesheet">
    <link href="{% static 'css/plugins/dataTables/datatables.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <link href="{% static 'css/project.css' %}" rel="stylesheet">

    {%  block head %}
{% endblock head %}
</head>
<body class="fixed-sidebar fixed-nav fixed-nav-basic {{ request.user.inspinia_skin}}">
<div id="wrapper">
    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav metismenu" id="side-menu">
                <li class="nav-header">
                    <div class="dropdown profile-element">
                        <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                            <span class="clear">
                                <span class="block m-t-xs">
                                    <strong class="font-bold">Monit Collector v0.9.1b </strong>
                                    </span>
                                    <span class="text-muted text-xs block">User : <b>{{ request.user|title }}</b>|{{ request.user.organisation|title}}</span>
                            </span>
                        </a>
                    </div>
                </li>

                    {% if request.user.is_authenticated %}
                        {% if request.user.is_superuser %}
                         {% url 'datacollector:organisations' as organisations %}
                        <li {% if request.path == organisations %} class="active"{% endif %}>
                            <a class="nav-link" href="{% url 'datacollector:organisations' %}"><i class="fa fa-building"></i> Organisations Management </a>
                        </li>
                        {% endif %}
                        {% if not request.user.is_superuser %}
                            {% url 'ui:dashboard' as dashboard_url %}
                            <li {% if request.path == dashboard_url %} class="active"{% endif %}>
                                <a  class="nav-link" href="{% url 'ui:dashboard' %}"><i class="fa fa-tachometer"></i> Dashboard</a>
                            </li>
                        {% endif %}
                        {% if request.user.is_superuser or request.user.organisation_manager %}
                        {% url 'users:index' as user_list %}
                        <li {% if request.path == user_list %} class="active"{% endif %}>
                            <a class="nav-link" href="{% url 'users:index' %}"><i class="fa fa-users"></i> User Management </a>
                        </li>
                        {% endif %}
                        {% block submenu %}
                        {% endblock %}
                    {% endif %}

                </nav>


                <div id="page-wrapper" class="gray-bg">
                    {% include "ui/_topnavbar.html" %}

                    <div class="row wrapper border-bottom white-bg page-heading animated fadeInUp">
                        <div class="col-lg-12">
                            <h2>{% block page_header %}{% endblock %}</h2>
                            <ol class="breadcrumb">
                                <li>
                                    <a href="{% url 'ui:dashboard' %}">Home</a>
                                </li>
                                <li class="active">
                                    <strong>{{ request.resolver_match.url_name|get_title }}</strong>
                                </li>
                            </ol>
                        </div>
                    </div>
                    <div class="page-header">
                        <h1>{% block page_title %}{% endblock %}</h1>
                    </div>
                    <div id="inner-wrapper" class="row wrapper  white-bg  wrapper-content animated fadeInRight">
                        <div class="col-lg-12">
                        <div class="col-md-12 column">

                            {% block content %}
                                <p>Use this document as a way to quick start any new project.</p>
                            {% endblock content %}
                            <!-- /row wrapper border-bottom white-bg page-heading -->
                            </div>
                        </div>

                    </div>
                    <div class="row">

                     <div class="filler"></div>
                    {% include "ui/_footer.html" %}

                    </div>
                </div>

                {% block customjs %}
                {% endblock customjs %}
                <!-- Le javascript
                ================================================== -->
                <!-- Placed at the end of the document so the pages load faster -->
                <script src="{% static 'js/bootstrap.min.js' %}"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.5/socket.io.min.js"></script>
                <script src="{% static 'js/plugins/metisMenu/jquery.metisMenu.js' %}"></script>
                <script src="{% static 'js/plugins/slimscroll/jquery.slimscroll.min.js' %}"></script>
                <script src="{% static 'js/plugins/toastr/toastr.min.js' %}"></script>
                <script src="{% static 'js/plugins/pace/pace.min.js' %}"></script>
                <script src="{% static 'js/plugins/dataTables/datatables.min.js' %}"></script>
                <script src="{% static 'js/inspinia.js' %}"></script>
                <script src="{% static 'js/jquery.printElement.min.js' %}"></script>
                {% if messages %}
                    {% for message in messages %}
                        <script type="text/javascript">
                        $(function () {
                        toastr.options = {
                        closeButton: true,
                        progressBar: true,
                        showMethod: 'slideDown',
                        timeOut: 4000
                        };
                        toastr.{% if message.tags %}{{ message.tags }}{% else %}sucess{% endif %}('','{{ message }}')
                        });
                        </script>
                    {% endfor %}
                {% endif %}

                        <script type="text/javascript">
                        $(document).ready(function() {
                            if(window.localStorage) {
                            localStorageSupport = true
                        }

                       $('.navbar-minimalize').click(function (){
                                side_menu_collapsed =  $("body").hasClass('mini-navbar');
                                console.log(side_menu_collapsed)
                                if (side_menu_collapsed)
                                    localStorage.setItem("side-menu",'off');
                                else
                                    localStorage.setItem("side-menu",'on');
                            })

                            if (localStorageSupport){
                                side_menu_status = localStorage.getItem("side-menu")
                                if (side_menu_status=="off"){
                                    $("body").addClass('mini-navbar');
                                }
                            }

                        })

                            </script>
                <!-- Latest compiled and minified JavaScript -->
                <!-- Your stuff: Third-party javascript libraries go here -->
                <!-- place project specific Javascript in this file -->
                <script src="{% static 'js/project.js' %}"></script>
                {% block javascript %}
                {% endblock javascript %}
                {% block ajaxcalls %}
                {% endblock ajaxcalls %}
            </body>
        </html>
